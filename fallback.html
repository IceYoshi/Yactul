<!DOCTYPE html>
<html>
    <head>
        <title>YACTUL</title>
        <meta charset="UTF-8">

        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
        <meta name="apple-touch-fullscreen" content="yes">
        <meta name="mobile-web-app-capable" content="yes">

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="css/style.css" />

        <script src="js/compressed.js"></script>

    </head>
    <body onload="init();">

      <div id="header">
        <img src="img/yactul-logo.png" width="200" alt="YACTUL"/>
      </div>

      <div id="section">
        <canvas id="canvas"><script>document.write('HTML5 is not supported by your browser.');</script></canvas>
        <noscript>Javascript is not supported or blocked by your browser.</noscript>
      </div>

      <div id="footer">
        <button type="button" class="btn btn-primary btn-sm" onclick="score();">score=500</button>
        <button type="button" class="btn btn-primary btn-sm" onclick="changeView();">ToggleView</button>
        <div id="separator"></div>
        <button type="button" class="btn btn-info btn-sm" onclick="changeTimer();">time=20</button>
        <button type="button" class="btn btn-info btn-sm" onclick="addTimer();">timer+=10</button>
        <button type="button" class="btn btn-info btn-sm" onclick="subtractTimer();">timer-=10</button>
        <button type="button" class="btn btn-info btn-sm" onclick="togglePauseTimer();">Pause/Resume</button>
        <div id="separator"></div>
        <button type="button" class="btn btn-warning btn-sm" onclick="abort();">Abort</button>
        <button type="button" class="btn btn-success btn-sm" onclick="activity1();">Activity1</button>
        <button type="button" class="btn btn-success btn-sm" onclick="activity2();">Activity2</button>
        <button type="button" class="btn btn-success btn-sm" onclick="activity3();">Activity3</button>
        <button type="button" class="btn btn-success btn-sm" onclick="activity4();">Activity4</button>
      </div>

      <script>
        // Disable context menu for the canvas
        document.getElementById('canvas').oncontextmenu = function (e) {
          e.preventDefault();
        };

        // redirect to compatibility version in case of an error
        window.onerror = function(error) {
          alert(error);
        };

        //--------------------------------------------------------------------------------------
        // Control panel - only for demonstration/testing
        var view = "student";
        var isPaused = false;

        function changeView() {
          view = view === "student" ? "projector" : "student";
          console.log("Changed view point to: " + view);
        }

        // Methods to simulate server messages (for testing purpose)
        function activity1() {
          isPaused = false;
          ServerConnection.receive(JSON.parse(`{ "cmd":"start", "activity": "SimpleQuestion", "id": 0, "view":"${view}", "text":"What is the meaning of life?", "answers":[ "Memorizing PI! 3.14159265358979323846...", "Get married", "42", "Vote for the upper one"], "time":25, "difficulty":1, "bg":"img/quiz-background.jpg" }`));
        }
        function activity2() {
          isPaused = false;
          ServerConnection.receive(JSON.parse(`{ "cmd":"start", "activity": "MultipleChoiceQuestion", "id": 1, "view":"${view}", "text":"Some random question about meals...", "answers":[ "Stuffed soup with a slice of hot pepper and some rice. Satisfaction guaranteed!", "Milk. Yes, just plain milk...", "Something I do not know the name of.", "Chocolate. Cause why not?" ], "time":30, "difficulty":3, "bg":"img/quiz-background.jpg" }`));
        }
        function activity3() {
          isPaused = false;
          ServerConnection.receive(JSON.parse(`{ "cmd":"start", "activity": "PointAndClick", "id": 2, "view":"${view}", "text":"Point at Germany!", "imagePath":"img/europe.jpg", "time":60, "difficulty":0, "bg":"img/quiz-background.jpg" }`));
        }
        function activity4() {
          isPaused = false;
          ServerConnection.receive(JSON.parse(`{ "cmd":"start", "activity": "Focus", "id": 3, "view":"${view}", "text":"Opposite of life?", "answers":["Zombie", "Undead", "Skeleton", "Dead"], "time":25, "difficulty":2, "bg":"img/quiz-background.jpg" }`));
        }
        function abort() {
          ServerConnection.receive(JSON.parse('{ "cmd" : "abort" }'));
        }
        function changeTimer() {
          ServerConnection.receive(JSON.parse('{ "cmd" : "update", "component": "timer", "type": "absolute", "value" : 20 }'));
        }
        function togglePauseTimer() {
          if(isPaused) {
            resumeTimer();
          } else {
            pauseTimer();
          }
          isPaused = !isPaused;
        }
        function pauseTimer() {
          ServerConnection.receive(JSON.parse('{ "cmd" : "update", "component": "timer", "type": "pause" }'));
        }
        function resumeTimer() {
          ServerConnection.receive(JSON.parse('{ "cmd" : "update", "component": "timer", "type": "resume" }'));
        }
        function addTimer() {
          ServerConnection.receive(JSON.parse('{ "cmd" : "update", "component": "timer", "type": "relative", "value" : 10 }'));
        }
        function subtractTimer() {
          ServerConnection.receive(JSON.parse('{ "cmd" : "update", "component": "timer", "type": "relative", "value" : -10 }'));
        }
        function score() {
          ServerConnection.receive(JSON.parse('{ "cmd" : "update", "component": "score", "value" : 500 }'));
        }
        //--------------------------------------------------------------------------------------
      </script>
    </body>
</html>
